# This example shows how to generate data and have it sent to a target topic in a given format.

streams:
  xsd_source:
    topic: ksml_xsd
    keyType: string
    valueType: xsd

functions:
  generate_xsd_message:
    type: generator
    code: |
      key = "dummy"
      value="""<?xml version="1.0"?>
      <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

      <xs:element name="noteOne">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="to" type="xs:string"/>
            <xs:element name="from" type="xs:string"/>
            <xs:element name="heading" type="xs:string"/>
            <xs:element name="body" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>

      <xs:element name="noteTwo">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="to" type="xs:string"/>
            <xs:element name="from" type="xs:string"/>
            <xs:element name="heading" type="xs:string"/>
            <xs:element name="body" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>

      </xs:schema>"""
    expression: (key,value)
    resultType: (string,string)

producers:
  xsd_producer:
    generator: generate_xsd_message
    interval: 1000
    to: xsd_source
